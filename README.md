<!-- Тестовое задание для стажера в Market Intelligence.

Задача:
Необходимо реализовать сервис, позволяющий следить за изменением количества объявлений в Авито по определённому поисковому запросу и региону.

Для написание сервиса можно использовать FastAPI или любой другой фреймворк.

Метод /add Должен принимать поисковую фразу и регион, регистрировать их в системе. Возвращать id этой пары.

Метод /stat Принимает на вход id связки поисковая фраза + регион и интервал, за который нужно вывести счётчики. Возвращает счётчики и соответствующие им временные метки (timestamp).

Частота опроса = 1 раз в час  для каждого id

Требования:
Язык программирования: Python 
Использование Docker, сервис должен запускаться с помощью docker-compose up.

Требований к используемым технологиям нет.
Код должен соответствовать PEP, необходимо использование type hints, к публичным методам должна быть написана документация.

Чтобы получить число объявлений, можно:
парсить web-страницу объявления (xpath, css-селекторы)

Сервис асинхронно обрабатывает запросы.
Данные сервиса хранятся во внешнем хранилище, запуск которого также описан в docker-compose. Мы рекомендуем использовать MongoDB или Postgres, но Вы можете использовать любую подходящую базу.
 -->

# Тестовое задание для стажера

## Задача
Необходимо реализовать сервис, позволяющий следить за изменением количества объявлений в **Авито** по определённому **поисковому запросу** и **региону**.

## Требования
- **Язык**: Python  
- **Фреймворк**: FastAPI (или любой другой)  
- **Контейнеризация**: сервис должен запускаться через `docker-compose up`  
- **Код-стайл**: PEP, использование `type hints`, документация к публичным методам  
- **Хранилище данных**:  
  - Внешняя база данных (рекомендуется **MySQL** или **PostgreSQL**)  
  - Запуск базы также должен быть описан в `docker-compose`  
- **Частота обновления данных**: 1 раз в час для каждого `id`  
- **Асинхронная обработка запросов**  

## API Методы
### `POST /add`
- **Описание**: 
    Метод /add принимает поисковую фразу и регион, регистрировать их в системе. Возвращать id этой пары.  
- **Входные данные**:  
  ```json
  {
    "query": "поисковая фраза",
    "region": "название региона"
  }

### `POST /stat`
- **Описание**: 
    Метод /stat Принимает на вход id связки поисковая фраза + регион и интервал, за который нужно вывести счётчики. Возвращает счётчики и соответствующие им временные метки (timestamp).
- **Входные данные**:  
  ```json
  {
  "request_id": 1,
  "start_search": "2025-01-01 12:00",
  "end_search": "2026-01-01 12:00"
    }
- **Ответ**: 
  ```json
  {
    "ads_count": 121261,
    "checked_at": "2025-01-29T22:57:00",
    "request": 4
  },
  {
    "ads_count": 168047,
    "checked_at": "2025-01-29T23:10:00",
    "request": 4
  },
  {
    "ads_count": 168047,
    "checked_at": "2025-01-29T23:22:00",
    "request": 4
  }